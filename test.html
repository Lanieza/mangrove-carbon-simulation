<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mangrove-Carbon Simulation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { display: flex; flex-direction: column; align-items: center; font-family: Arial, sans-serif; background-color: #e0f7fa; }
        .container { display: flex; }
        .controls, canvas { margin: 20px; }
        .legend { display: flex; gap: 15px; margin-bottom: 10px; }
        .legend div { display: flex; align-items: center; gap: 8px; font-size: 16px; }
        .legend i { font-size: 20px; }
        .control-group { display: flex; align-items: center; gap: 10px; margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>Mangrove-Carbon Simulation</h1>
    <div class="legend">
        <div><i class="fas fa-tree" style="color:#4CAF50;"></i> Mangrove</div>
        <div><i class="fas fa-car" style="color:#2196F3;"></i> Vehicles</div>
        <div><i class="fas fa-home" style="color:#FF9800;"></i> Houses</div>
        <div><i class="fas fa-industry" style="color:#9E9E9E;"></i> Factories</div>
        <div><i class="fas fa-users" style="color:#9C27B0;"></i> Population</div>
    </div>
    <div class="container">
        <div class="controls">
            <div class="control-group">
                <label>Sea Temperature:</label> 
                <input type="range" id="temp" min="20" max="35" value="25" oninput="updateSimulation()">
            </div>
            <div class="control-group">
                <label>Mangrove Coverage:</label>
                <input type="range" id="mangrove" min="0" max="100" value="50" oninput="updateSimulation()">
            </div>
            <div class="control-group">
                <label>Vehicles:</label>
                <input type="range" id="vehicles" min="0" max="100" value="50" oninput="updateSimulation()">
            </div>
            <div class="control-group">
                <label>Houses:</label>
                <input type="range" id="houses" min="0" max="100" value="50" oninput="updateSimulation()">
            </div>
            <div class="control-group">
                <label>Factories:</label>
                <input type="range" id="factories" min="0" max="100" value="50" oninput="updateSimulation()">
            </div>
            <div class="control-group">
                <label>Population:</label>
                <input type="range" id="population" min="0" max="100" value="50" oninput="updateSimulation()">
            </div>
        </div>
        <canvas id="simulationCanvas" width="1000" height="650" style="border: 1px solid black;"></canvas>
    </div>
    <canvas id="carbonGraph" width="600" height="300"></canvas>
    
    <script>
        const ctx = document.getElementById('carbonGraph').getContext('2d');
        const simCanvas = document.getElementById('simulationCanvas');
        const simCtx = simCanvas.getContext('2d');

        let carbonData = Array(12).fill(50);
        const carbonChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array.from({ length: 12 }, (_, i) => `${i + 1} Month`),
                datasets: [{ label: 'Carbon Level', data: carbonData, borderColor: 'red', fill: false }]
            },
            options: { responsive: false }
        });

        function updateSimulation() {
            let temp = document.getElementById('temp').value;
            let mangrove = document.getElementById('mangrove').value;
            let vehicles = document.getElementById('vehicles').value;
            let houses = document.getElementById('houses').value;
            let factories = document.getElementById('factories').value;
            let population = document.getElementById('population').value;

            let carbonLevel = 100 - mangrove * 0.5 + vehicles * 0.3 + factories * 0.4 + houses * 0.2 + population * 0.2 + (temp - 25) * 0.5;
            carbonData.push(carbonLevel);
            carbonData.shift();
            carbonChart.update();

            simCtx.clearRect(0, 0, simCanvas.width, simCanvas.height);

            let waveOffset = 100;

            function drawSea() {
                simCtx.fillStyle = '#a3d5ff';
                simCtx.fillRect(0, 0, simCanvas.width * 0.3, simCanvas.height);

                let amplitude = 20;  // Wave curve size
                let frequency = 0.02; // Wave tightness
                let numWaves = 5;     // Number of overlapping waves
                let waveSpacing = 2; // Distance between waves

                simCtx.fillStyle = '#4da6ff';
                simCtx.beginPath();

                for (let i = 0; i < numWaves; i++) {
                    let phase = i * Math.PI / numWaves; // Offset each wave slightly

                    simCtx.moveTo(0, 0);
                    for (let y = 0; y <= simCanvas.height; y += 5) {
                        let waveX = Math.sin((y + waveOffset + phase) * frequency) * amplitude + 150;
                        simCtx.lineTo(waveX, y);
                    }
                    simCtx.lineTo(0, simCanvas.height); // Close the wave shape
                }

                simCtx.closePath();
                simCtx.fill();

                // Draw natural-looking shoreline
                simCtx.fillStyle = '#c2a772'; // Sandy color
                simCtx.beginPath();
                for (let y = 0; y <= simCanvas.height; y += 10) {
                    let shorelineX = simCanvas.width * 0.26 + Math.sin((y + waveOffset) * 0.03) * 8;
                    simCtx.lineTo(shorelineX, y);
                }
                simCtx.lineTo(simCanvas.width * 0.5, simCanvas.height);
                simCtx.lineTo(simCanvas.width * 0.5, 0);
                simCtx.closePath();
                simCtx.fill();
            }

            // Update animation
            function animateSea() {
                waveOffset += 1; // Controls wave movement speed
                simCtx.clearRect(0, 0, simCanvas.width, simCanvas.height);
                drawSea();
                requestAnimationFrame(animateSea);
            }

            // Start animation
            animateSea();

            // Draw the road
                simCtx.fillStyle = '#5c5c5c'; // Dark gray for the road
                let roadStartX = simCanvas.width * 0.5; // Start road at shoreline's right edge
                let roadWidth = simCanvas.width * 0.2; // Adjust width as needed

                simCtx.fillRect(roadStartX, 0, roadWidth, simCanvas.height);

                // Add lane dividers
                simCtx.strokeStyle = '#ffffff'; // White dashed lines
                simCtx.lineWidth = 3;
                simCtx.setLineDash([15, 10]); // Dashed pattern

                simCtx.beginPath();
                simCtx.moveTo(roadStartX + roadWidth / 2, 0);
                simCtx.lineTo(roadStartX + roadWidth / 2, simCanvas.height);
                simCtx.stroke();
                simCtx.setLineDash([]); // Reset dashed line


            // Draw mangroves
            simCtx.fillStyle = '#4CAF50';
            for (let i = 0; i < mangrove / 10; i++) {
                simCtx.fillRect(30 + i * 10, 180, 8, 20);
            }

            // Draw houses
            simCtx.fillStyle = '#FF9800';
            for (let i = 0; i < houses / 10; i++) {
                simCtx.fillRect(250 + i * 15, 180, 12, 12);
            }

            // Draw factories
            simCtx.fillStyle = '#9E9E9E';
            for (let i = 0; i < factories / 10; i++) {
                simCtx.fillRect(350 + i * 15, 170, 12, 20);
            }

            // Draw vehicles
            simCtx.fillStyle = '#2196F3';
            for (let i = 0; i < vehicles / 10; i++) {
                simCtx.fillRect(450 + i * 12, 190, 10, 10);
            }

            // Draw population as dots
            simCtx.fillStyle = '#9C27B0';
            for (let i = 0; i < population / 10; i++) {
                simCtx.beginPath();
                simCtx.arc(480 + i * 8, 170, 4, 0, Math.PI * 2);
                simCtx.fill();
            }
        }

        document.querySelectorAll('input').forEach(input => input.addEventListener('input', updateSimulation));
        updateSimulation();
    </script>
</body>
</html>